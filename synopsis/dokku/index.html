<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.16">
<link rel="alternate" type="application/rss+xml" href="/rss.xml" title="Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/atom.xml" title="Blog Atom Feed">
<script src="https://umami.lebalz.ch/umami.js" data-website-id="fc37f18b-ef7a-4e4c-aebd-dc95acfcee02" data-domains="lebalz.ch" async defer="defer"></script><title data-rh="true">Dokku | Blog</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://lebalz.ch/synopsis/dokku/"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Dokku | Blog"><meta data-rh="true" name="description" content="Dokku is a software suite that simulates a PaaS on any server. It uses the same base functionality as Heroku and tries to mimic usage of Heroku as much as possible. With Dokku, it’s very easy to deploy software and run multiple projects on the same physical server through the use of containers."><meta data-rh="true" property="og:description" content="Dokku is a software suite that simulates a PaaS on any server. It uses the same base functionality as Heroku and tries to mimic usage of Heroku as much as possible. With Dokku, it’s very easy to deploy software and run multiple projects on the same physical server through the use of containers."><meta data-rh="true" name="keywords" content="dokku"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://lebalz.ch/synopsis/dokku/"><link data-rh="true" rel="alternate" href="https://lebalz.ch/synopsis/dokku/" hreflang="en"><link data-rh="true" rel="alternate" href="https://lebalz.ch/synopsis/dokku/" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.7f166a3e.css">
<link rel="preload" href="/assets/js/runtime~main.3fbcce97.js" as="script">
<link rel="preload" href="/assets/js/main.04afa337.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="Le Balz" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/logo.png" alt="Le Balz" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">Dev Blog</b></a><a class="navbar__item navbar__link navbar__link--active" href="/synopsis/">Knowledgebase</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/lebalz/blog" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_Pssr toggle_TdHA toggleDisabled_jDku"><div class="toggleTrack_SSoT" role="button" tabindex="-1"><div class="toggleTrackCheck_XobZ"><span class="toggleIcon_eZtF">🌜</span></div><div class="toggleTrackX_YkSC"><span class="toggleIcon_eZtF">🌞</span></div><div class="toggleTrackThumb_uRm4"></div></div><input type="checkbox" class="toggleScreenReader_JnkT" aria-label="Switch between dark and light mode (currently light mode)"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_CW9Y"><nav class="menu thin-scrollbar menu_SkdO"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/synopsis/">Knowledgebase</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible menu__list-item-collapsible--active"><a class="menu__link menu__link--active" aria-current="page" href="/synopsis/dokku/">dokku</a><button aria-label="Toggle the collapsible sidebar category &#x27;dokku&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/synopsis/dokku/bitwarden/">Bitwarden</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/synopsis/dokku/letsencrypt/">Letsencrypt</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/synopsis/dokku/umami/">Umami</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" tabindex="0" href="/synopsis/dokku/drone-ci/">drone-ci</a><button aria-label="Toggle the collapsible sidebar category &#x27;drone-ci&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/synopsis/docker/">Docker</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/synopsis/helpers/unzip/">helpers</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/synopsis/surface/keyboard/">Surface</a></div></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Xlws" aria-label="breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a class="breadcrumbs__link breadcrumbsItemLink_e5ie" href="/">🏠</a></li><li class="breadcrumbs__item breadcrumbs__item--active"><a class="breadcrumbs__link breadcrumbsItemLink_e5ie" href="/synopsis/dokku/">dokku</a></li></ul></nav><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Dokku</h1><blockquote><p>Dokku is a software suite that simulates a PaaS on any server. It uses the same base functionality as Heroku and tries to mimic usage of Heroku as much as possible. With Dokku, it’s very easy to deploy software and run multiple projects on the same physical server through the use of containers. <sup id="fnref-1"><a href="#fn-1" class="footnote-ref">1</a></sup></p></blockquote><h1>Dokku Server Setup</h1><h2 class="anchor anchorWithStickyNavbar_mojV" id="plugins">Plugins<a class="hash-link" href="#plugins" title="Direct link to heading">​</a></h2><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx bash"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">dokku plugin:install https://github.com/dokku/dokku-letsencrypt.git</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dokku plugin:install https://github.com/dokku/dokku-http-auth.git</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dokku plugin:install https://github.com/lebalz/dokku-post-deploy-script post-deploy-script</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dokku plugin:install https://github.com/dokku/dokku-postgres.git postgres</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dokku plugin:install https://github.com/dokku/dokku-mysql.git mysql</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dokku plugin:install https://github.com/dokku/dokku-redis.git redis</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="server-swap">Server Swap<a class="hash-link" href="#server-swap" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_mojV" id="enable-swap">Enable Swap<a class="hash-link" href="#enable-swap" title="Direct link to heading">​</a></h3><ol><li>First, create a file that will be used as swap:</li></ol><div class="codeBlockContainer_I0IT language-sh theme-code-block"><div class="codeBlockContent_wNvx sh"><pre tabindex="0" class="prism-code language-sh codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">sudo fallocate -l 2G /swapfile</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Set the file permissions to 600 to prevent regular users to write and read the file:</p><div class="codeBlockContainer_I0IT language-sh theme-code-block"><div class="codeBlockContent_wNvx sh"><pre tabindex="0" class="prism-code language-sh codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">sudo chmod 600 /swapfile</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Create a Linux swap area on the file:</p><div class="codeBlockContainer_I0IT language-sh theme-code-block"><div class="codeBlockContent_wNvx sh"><pre tabindex="0" class="prism-code language-sh codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">sudo mkswap /swapfile</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Activate the swap file by running the following command:</p><div class="codeBlockContainer_I0IT language-sh theme-code-block"><div class="codeBlockContent_wNvx sh"><pre tabindex="0" class="prism-code language-sh codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">sudo swapon /swapfile</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>To make the change permanent open the /etc/fstab file:</p><div class="codeBlockContainer_I0IT language-sh theme-code-block"><div class="codeBlockContent_wNvx sh"><pre tabindex="0" class="prism-code language-sh codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">sudo nano /etc/fstab</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>and paste the following line:</p><div class="codeBlockContainer_I0IT language-sh theme-code-block"><div class="codeBlockContent_wNvx sh"><pre tabindex="0" class="prism-code language-sh codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">/etc/fstab</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/swapfile swap swap defaults 0 0</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Verify that the swap is active by using either the swapon or the free command, as shown below:</p><div class="codeBlockContainer_I0IT language-sh theme-code-block"><div class="codeBlockContent_wNvx sh"><pre tabindex="0" class="prism-code language-sh codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">sudo swapon --show</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><div class="codeBlockContainer_I0IT language-sh theme-code-block"><div class="codeBlockContent_wNvx sh"><pre tabindex="0" class="prism-code language-sh codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">NAME      TYPE      SIZE  USED PRIO</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/swapfile file        2G    0B   -1Copy</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><div class="codeBlockContainer_I0IT language-sh theme-code-block"><div class="codeBlockContent_wNvx sh"><pre tabindex="0" class="prism-code language-sh codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">sudo free -h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              total        used        free      shared  buff/cache   available</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Mem:          981Mi        97Mi        68Mi       0.0Ki       814Mi       735Mi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Swap:         2.0Gi        10Mi       1.9Gi</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="adjusting-the-swappiness-value">Adjusting the Swappiness Value<a class="hash-link" href="#adjusting-the-swappiness-value" title="Direct link to heading">​</a></h3><p>Swappiness is a Linux kernel property that defines how often the system will use the swap space. It can have a value between 0 and 100. A low value will make the kernel to try to avoid swapping whenever possible, while a higher value will make the kernel to use the swap space more aggressively.</p><p>On Ubuntu, the default swappiness value is set to 60. You can check the current value by typing the following command:</p><div class="codeBlockContainer_I0IT language-sh theme-code-block"><div class="codeBlockContent_wNvx sh"><pre tabindex="0" class="prism-code language-sh codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">cat /proc/sys/vm/swappiness</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 60</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>While the swappiness value of 60 is OK for most Linux systems, for production servers, you may need to set a lower value.</p><p>For example, to set the swappiness value to 10, run:</p><div class="codeBlockContainer_I0IT language-sh theme-code-block"><div class="codeBlockContent_wNvx sh"><pre tabindex="0" class="prism-code language-sh codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">sudo sysctl vm.swappiness=10</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>To make this parameter persistent across reboots, append the following line to the /etc/sysctl.conf file:</p><div class="codeBlockContainer_I0IT language-sh theme-code-block"><div class="codeBlockContent_wNvx sh"><pre tabindex="0" class="prism-code language-sh codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain"># /etc/sysctl.conf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vm.swappiness=10</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>The optimal swappiness value depends on your system workload and how the memory is being used. You should adjust this parameter in small increments to find an optimal value</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="disable-swap">Disable Swap<a class="hash-link" href="#disable-swap" title="Direct link to heading">​</a></h3><ol><li>First, deactivate the swap space:</li></ol><div class="codeBlockContainer_I0IT language-sh theme-code-block"><div class="codeBlockContent_wNvx sh"><pre tabindex="0" class="prism-code language-sh codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">sudo swapoff -v /swapfile</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><ol start="2"><li><p>Next, remove the swap file entry /swapfile swap swap defaults 0 0 from the /etc/fstab file.</p></li><li><p>Finally, remove the actual swapfile file using the rm command:</p></li></ol><div class="codeBlockContainer_I0IT language-sh theme-code-block"><div class="codeBlockContent_wNvx sh"><pre tabindex="0" class="prism-code language-sh codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">sudo rm /swapfile</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><div class="footnotes"><hr><ol><li id="fn-1"><a href="https://knowledge.code-fabrik.ch/software/dokku/" target="_blank" rel="noopener noreferrer">What is Dokku</a><a href="#fnref-1" class="footnote-backref">↩</a></li></ol></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/lebalz/blog/edit/main/docs/dokku/index.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_foO9"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/synopsis/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Knowledgebase</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/synopsis/dokku/bitwarden/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Bitwarden</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#plugins" class="table-of-contents__link toc-highlight">Plugins</a></li><li><a href="#server-swap" class="table-of-contents__link toc-highlight">Server Swap</a><ul><li><a href="#enable-swap" class="table-of-contents__link toc-highlight">Enable Swap</a></li><li><a href="#adjusting-the-swappiness-value" class="table-of-contents__link toc-highlight">Adjusting the Swappiness Value</a></li><li><a href="#disable-swap" class="table-of-contents__link toc-highlight">Disable Swap</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Knowledgebase</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/synopsis/dokku/">Dokku</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/lebalz" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 Le Balz</div></div></div></footer></div>
<script src="/assets/js/runtime~main.3fbcce97.js"></script>
<script src="/assets/js/main.04afa337.js"></script>
</body>
</html>